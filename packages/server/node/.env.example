# SightEdit Server Configuration
# Copy this file to .env and configure for your environment

# Environment
NODE_ENV=production

# Server
PORT=3000
HOST=0.0.0.0

# Security - Content Security Policy
CSP_REPORT_ONLY=false  # Set to true to test CSP without enforcement
CSP_REPORT_URI=/api/csp-report
CSP_REPORT_TO=default  # Report-To group name

# Trusted external hosts (comma-separated)
TRUSTED_SCRIPT_HOSTS=https://cdn.jsdelivr.net,https://unpkg.com
TRUSTED_STYLE_HOSTS=https://fonts.googleapis.com,https://cdn.jsdelivr.net
API_ENDPOINTS=https://api.example.com

# Security - Authentication
JWT_SECRET=your-secret-key-change-this-in-production
API_KEY_REQUIRED=true
AUTH_PROVIDER=jwt  # Options: jwt, oauth2, api-key

# Security - Rate Limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=60  # Max requests per window

# Storage
STORAGE_TYPE=file  # Options: memory, file, database
STORAGE_PATH=./sightedit-data
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760  # 10MB in bytes

# Database (if using database storage)
DB_TYPE=postgresql  # Options: postgresql, mysql, sqlite, mongodb
DB_HOST=localhost
DB_PORT=5432
DB_NAME=sightedit
DB_USER=sightedit_user
DB_PASSWORD=secure_password

# Monitoring
MONITORING_ENDPOINT=https://monitoring.example.com/events
SENTRY_DSN=
LOG_LEVEL=info  # Options: error, warn, info, debug

# CORS
CORS_ENABLED=true
CORS_ORIGINS=https://example.com,https://app.example.com
CORS_CREDENTIALS=true

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_INCLUDE_SYSTEM_INFO=false  # Set to true for debugging

# TLS/SSL (for production)
TLS_CERT_PATH=/path/to/cert.pem
TLS_KEY_PATH=/path/to/key.pem
TLS_CA_PATH=/path/to/ca.pem

# Session
SESSION_SECRET=another-secret-key-change-this
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds
SESSION_SECURE=true  # Require HTTPS for cookies
SESSION_SAME_SITE=strict  # CSRF protection

# Feature Flags
ENABLE_WEBSOCKET=true
ENABLE_FILE_UPLOAD=true
ENABLE_COLLABORATION=false
ENABLE_VERSIONING=false

# Performance
CACHE_TTL=3600  # 1 hour in seconds
COMPRESSION_ENABLED=true
CLUSTER_WORKERS=auto  # Number of workers or 'auto' for CPU count